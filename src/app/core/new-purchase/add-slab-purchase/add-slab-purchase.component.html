<p-toast></p-toast>
<div class="card p-3">
    <form [formGroup]="slabAddForm" (ngSubmit)="slabAddFormSubmit()">
        <div class="row">
            <div class="col-sm-12">
                <div class="row">
                    <div class="col-md-6 col-sm-12">
                        <h3>Add Slab Details</h3>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 col-md-6">
                        <div class="form-group local-forms">
                            <label for="vehicleNo">Vehicle Number</label>
                            <input class="form-control" type="text" placeholder="Enter Vehicle Number"
                                formControlName="vehicleNo" />
                            <div *ngIf="setValidations('vehicleNo')">
                                <span class="login-danger">Invalid vehicle number format. Please correct it.</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="form-group local-forms">
                            <label for="warehouseDetails">Warehouse<span class="login-danger">*</span></label>
                            <p-dropdown [options]="wareHousedata" appendTo="body" optionLabel="name" optionValue="_id"
                                placeholder="Select Warehouse" formControlName="warehouseDetails"
                                [style]="{ width: '100%' }" [filter]="true" filterBy="name" [showClear]="true">
                            </p-dropdown>
                            <!-- {{ slabAddForm.get('warehouseDetails')?.value}} -->
                            <div *ngIf="setValidations('warehouseDetails')">
                                <span class="login-danger">Field is required.</span>
                            </div>
                        </div>
                    </div>


                    <div class="col-12">
                        <button type="button" class="border-0 btn btn-primary btn-gradient-primary m-r-10 mb-3"
                            (click)="addSlabDialog()">
                            Add Slab
                        </button>
                        <!-- [disabled]="!slabAddForm.valid" -->
                    </div>
                </div>
                <!-- <p-dialog header="Add Slab" [(visible)]="addvisible" (onHide)="onDialogHide()" [modal]="true"
                    [style]="{ width: '60%'}">
                    <div class="modal-content mt-2">
                        <div class="modal-body">
                            <div formArrayName="addSlab">
                                <div *ngFor="let slab of addSlab.controls; let i = index" [formGroupName]="i">
                                    <div *ngIf="i === activeIndex" class="row">
                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="slabName">Slab Name</label>
                                                <input class="form-control" type="text" placeholder="Enter Slab Name"
                                                    formControlName="slabName" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="slabNumber">Slab Number</label>
                                                <input class="form-control" type="text"
                                                    placeholder="Enter Vehicle Number" formControlName="slabNumber" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="category">Category <span
                                                        class="login-danger">*</span></label>
                                                <p-dropdown [options]="CategoryListsEditArray" styleClass=""
                                                    appendTo="body" optionLabel="name" optionValue="_id"
                                                    placeholder="Select Category" formControlName="categoryDetail"
                                                    [style]="{ width: '100%' }" [filter]="true" filterBy="name"
                                                    [showClear]="false"
                                                    (onChange)="findSubCategory($event.value)"></p-dropdown>
                                                <div
                                                    *ngIf="addSlab.at(i).get('categoryDetail')?.hasError('required') && addSlab.at(i).get('categoryDetail')?.touched">
                                                    <span class="login-danger">Field is required.</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="subCategory">Sub Category <span
                                                        class="login-danger">*</span></label>
                                                <p-dropdown [options]="subCategorListByCategory" styleClass=""
                                                    appendTo="body" optionValue="_id" placeholder="Select Sub Category"
                                                    optionLabel="name" formControlName="subCategoryDetail"
                                                    [style]="{ width: '100%' }" [filter]="true" filterBy="name"
                                                    [showClear]="false"></p-dropdown>
                                                <div
                                                    *ngIf="addSlab.at(i).get('subCategoryDetail')?.hasError('required') && addSlab.at(i).get('subCategoryDetail')?.touched">
                                                    <span class="login-danger">Field is required.</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="width">Width</label>
                                                <input class="form-control" type="text" placeholder="Enter Width"
                                                    formControlName="width" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="length">Length</label>
                                                <input class="form-control" type="text" placeholder="Enter Length"
                                                    formControlName="length" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="thikness">Thickness</label>
                                                <input class="form-control" type="text" placeholder="Enter Thickness"
                                                    formControlName="thikness" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="subCategory">Finishes<span
                                                        class="login-danger">*</span></label>
                                                <p-dropdown [options]="finishes" styleClass="" appendTo="body"
                                                    placeholder="Select finishes" optionLabel="name"
                                                    formControlName="finishes" [style]="{ width: '100%' }"
                                                    [filter]="true" filterBy="name" [showClear]="true">
                                                </p-dropdown>
                                                <div
                                                    *ngIf="addSlab.at(i).get('finishes')?.hasError('required') && addSlab.at(i).get('finishes')?.touched">
                                                    <span class="login-danger">Field is required.</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="taxableAmount">Taxable Amount</label>
                                                <p-inputGroup>
                                                    <input type="number" formControlName="taxableAmount"
                                                        class="form-control" style="width: 50%"
                                                        placeholder="Enter Taxable Amount"
                                                        (change)="calculateTotalAmount()" />
                                                    <p-multiSelect [style]="{ width: '100%' }" placeholder="Select Tax"
                                                        [options]="orderTaxList" appendTo="body"
                                                        formControlName="taxApplied" optionLabel="orderTaxName"
                                                        optionValue="orderNamevalue" display="chip"
                                                        (onChange)="calculateTotalAmount()"></p-multiSelect>
                                                </p-inputGroup>
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="finishes">Non-Taxable Amount</label>
                                                <input class="form-control" type="number"
                                                    placeholder="Non-Taxable Amount" formControlName="nonTaxable"
                                                    (change)="calculateTotalAmount()" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="paidToSupplierPurchaseCost">Purchase Cost ( Paid to Supplier
                                                    )
                                                    <span class="login-danger">*</span></label>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">₹</span>
                                                    </div>
                                                    <span class="form-control">
                                                        {{
                                                        slab.get('paidToSupplierSlabCost').value || 0
                                                        }}
                                                    </span>
                                                </div>
                                                <span *ngIf="
                                            slab.get('taxable').value  > slab.get('taxableAmount').value &&
                                            slab.get('taxable').value  != 0
                                          " style="color: #97704f; font-size: 12px">
                                                    Tax Applied Amount:
                                                    {{ slab.get('taxable').value | number : "1.2-2" }}
                                                    + Non Taxable Amount :
                                                    {{
                                                    slab.get("nonTaxable").value | number : "1.2-2"
                                                    }}
                                                </span>
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="sqftPerPiece">Square Feet <span
                                                        class="login-danger">*</span></label>
                                                <input class="form-control" type="text" placeholder="Enter Square Feet"
                                                    formControlName="sqftPerPiece" (change)="calculateTotalAmount()" />
                                                <div
                                                    *ngIf="addSlab.at(i).get('sqftPerPiece')?.hasError('required') && addSlab.at(i).get('sqftPerPiece')?.touched">
                                                    <span class="login-danger">Field is required.</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="numberOfPieces">Number Of Pieces <span
                                                        class="login-danger">*</span></label>
                                                <input class="form-control" type="text"
                                                    placeholder="Enter Number Of Prices"
                                                    formControlName="numberOfPieces"
                                                    (change)="calculateTotalAmount()" />
                                                <div
                                                    *ngIf="addSlab.at(i).get('numberOfPieces')?.hasError('required') && addSlab.at(i).get('numberOfPieces')?.touched">
                                                    <span class="login-danger">Field is required.</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="sellingprice">Selling Price / Sq Ft <span
                                                        class="login-danger">*</span></label>
                                                <input class="form-control" type="text"
                                                    placeholder="Enter Selling Price / Sq Ft"
                                                    formControlName="sellingprice" (change)="calculateTotalAmount()" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="costPerSQFT">Cost / Square Feet</label>
                                                <input class="form-control" type="text"
                                                    placeholder="Enter Cost / Square Feet" formControlName="costPerSQFT"
                                                    (change)="calculateTotalAmount()" />
                                            </div>
                                        </div>

                                        <div class="col-12">
                                            <button type="button"
                                                class="border-0 btn btn-primary btn-gradient-primary m-r-10 mb-3"
                                                (click)="savaSlab()">
                                                [disabled]="!slabAddForm.get('addSlab').valid"
                                                Save
                                            </button>
                                            <button (click)="addvisible = false" type="button"
                                                class="border-0 btn btn-primary btn-gradient-primary m-r-10 mb-3">
                                                Close
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </p-dialog> -->

                <p-dialog header="Add Slab" [(visible)]="addvisible" (onHide)="onDialogHide()" [modal]="true"
                    [style]="{ width: '60%'}">
                    <div class="modal-content mt-2">
                        <div class="modal-body">
                            <div formArrayName="addSlab">
                                <div *ngFor="let slab of addSlab.controls; let i = index" [formGroupName]="i">
                                    <div *ngIf="i === activeIndex" class="row">
                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="slabName">Marble / Stone Name</label>
                                                <input class="form-control" type="text"
                                                    placeholder="Enter Marble / Stone Name"
                                                    formControlName="slabName" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="slabNumber">Slab Number</label>
                                                <input class="form-control" type="text" placeholder="Enter Slab Number"
                                                    formControlName="slabNumber" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="category">Category <span
                                                        class="login-danger">*</span></label>
                                                <p-dropdown [options]="CategoryListsEditArray" styleClass=""
                                                    appendTo="body" optionLabel="name" optionValue="_id"
                                                    placeholder="Select Category" formControlName="categoryDetail"
                                                    [style]="{ width: '100%' }" [filter]="true" filterBy="name"
                                                    [showClear]="false"
                                                    (onChange)="findSubCategory($event.value)"></p-dropdown>
                                                <div
                                                    *ngIf="addSlab.at(i).get('categoryDetail')?.hasError('required') && addSlab.at(i).get('categoryDetail')?.touched">
                                                    <span class="login-danger">Field is required.</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="subCategory">Sub Category <span
                                                        class="login-danger">*</span></label>
                                                <p-dropdown [options]="subCategorListByCategory" styleClass=""
                                                    appendTo="body" 
                                                    placeholder="Select Sub Category"
                                                    optionLabel="name" formControlName="subCategoryDetail"
                                                    [style]="{ width: '100%' }" [filter]="true" filterBy="name"
                                                    [showClear]="false"></p-dropdown>
                                                <div
                                                    *ngIf="addSlab.at(i).get('subCategoryDetail')?.hasError('required') && addSlab.at(i).get('subCategoryDetail')?.touched">
                                                    <span class="login-danger">Field is required.</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="noOfPieces">Number of Pieces</label>
                                                <input class="form-control" type="number"
                                                    placeholder="Enter Number of Pieces"
                                                    formControlName="noOfPieces" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="width">Width (Inch)</label>
                                                <input class="form-control" type="number" placeholder="Enter Width"
                                                    formControlName="width" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="length">Length (Inch)</label>
                                                <input class="form-control" type="number" placeholder="Enter Length"
                                                    formControlName="length" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="thickness">Thickness (MM)</label>
                                                <input class="form-control" type="number" placeholder="Enter Thickness"
                                                    formControlName="thickness" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="finishes">Finishes<span
                                                        class="login-danger">*</span></label>
                                                <p-dropdown [options]="finishes" styleClass="" appendTo="body"
                                                    placeholder="Select finishes" optionLabel="name"
                                                    formControlName="finishes" [style]="{ width: '100%' }"
                                                    [filter]="true" filterBy="name" [showClear]="true">
                                                </p-dropdown>
                                                <div
                                                    *ngIf="addSlab.at(i).get('finishes')?.hasError('required') && addSlab.at(i).get('finishes')?.touched">
                                                    <span class="login-danger">Field is required.</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="quantity">Quantity (Sq. Feet)</label>
                                                <input class="form-control" type="number" placeholder="Enter Quantity"
                                                    formControlName="quantity" (change)="slabTotalAmount()" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="ratePerSqFeet">Rate / Sq. Feet</label>
                                                <input class="form-control" type="number"
                                                    placeholder="Enter Rate per Sq. Feet"
                                                    formControlName="ratePerSqFeet" (change)="slabTotalAmount()" />
                                            </div>
                                        </div>

                                        <div class="col-12 col-md-6 col-xl-6">
                                            <div class="form-group local-forms">
                                                <label for="totalAmount">Total Amount</label>
                                                <input class="form-control" type="number" placeholder="Total Amount"
                                                    formControlName="totalAmount" readonly />
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <button type="button"
                                                class="border-0 btn btn-primary btn-gradient-primary m-r-10 mb-3"
                                                (click)="savaSlab()">
                                                <!-- [disabled]="!slabAddForm.get('addSlab').valid" -->
                                                Save
                                            </button>
                                            <button (click)="addvisible = false" type="button"
                                                class="border-0 btn btn-primary btn-gradient-primary m-r-10 mb-3">
                                                Close
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </p-dialog>

            </div>
        </div>

        <div class="row" *ngIf="slabDetails?.length > 0">
            <div class="col-sm-12">
                <div class="card card-table">
                    <div class="card-body">
                        <div class="page-table-header mb-2">
                            <div class="d-flex m-b-10" style="justify-content: space-between">
                                <h3>Slab List</h3>
                            </div>
                        </div>
        
                        <div class="row p-2">
                            <p-accordion [activeIndex]="[0]" [multiple]="true">
                                <p-accordionTab *ngFor="let data of slabDetails; let i = index">
                                    <ng-template pTemplate="header">
                                        <span class="d-flex justify-content-between w-full">
                                            <span class="font-bold white-space-nowrap">
                                                Slab Number: {{ data.slabNumber }}
                                            </span>
                                            <p-button [text]="true" styleClass="w-2rem h-2rem p-0" icon="fa fa-trash"
                                                (click)="removeSlab(i)"></p-button>
                                        </span>
                                    </ng-template>
        
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="card card-table show-entire">
                                                <div class="page-table-header mb-2 m-3">
                                                    <div class="row practice-card">
                                                        <div class="col-xl-6 col-lg-6 col-sm-12">
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-3 col-md-3 col-xl-3 col-form-label">
                                                                    Slab Name
                                                                </h5>
                                                                <div class="col-lg-9 col-md-9 col-xl-9">
                                                                    <p class="col-form-label">
                                                                        {{ data.slabName }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-3 col-md-3 col-xl-3 col-form-label">
                                                                    Length (Inch)
                                                                </h5>
                                                                <div class="col-lg-9 col-md-9 col-xl-9">
                                                                    <p class="col-form-label">
                                                                        {{ data.length }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-3 col-md-3 col-xl-3 col-form-label">
                                                                    Width (Inch)
                                                                </h5>
                                                                <div class="col-lg-9 col-md-9 col-xl-9">
                                                                    <p class="col-form-label">{{ data.width }}</p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-3 col-md-3 col-xl-3 col-form-label">
                                                                    Thickness
                                                                </h5>
                                                                <div class="col-lg-9 col-md-9 col-xl-9">
                                                                    <p class="col-form-label">
                                                                        {{ data.thickness }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-xl-6 col-lg-6 col-sm-12">
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-3 col-md-3 col-xl-3 col-form-label">
                                                                    Rate Per Sq Feet
                                                                </h5>
                                                                <div class="col-lg-9 col-md-9 col-xl-9">
                                                                    <p class="col-form-label">
                                                                        ₹ {{ data.ratePerSqFeet }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-3 col-md-3 col-xl-3 col-form-label">
                                                                    Total Amount
                                                                </h5>
                                                                <div class="col-lg-9 col-md-9 col-xl-9">
                                                                    <p class="col-form-label">
                                                                        ₹ {{ data.totalAmount }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-3 col-md-3 col-xl-3 col-form-label">
                                                                    Number of Pieces
                                                                </h5>
                                                                <div class="col-lg-9 col-md-9 col-xl-9">
                                                                    <p class="col-form-label">
                                                                        {{ data.noOfPieces }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-3 col-md-3 col-xl-3 col-form-label">
                                                                    Finishes
                                                                </h5>
                                                                <div class="col-lg-9 col-md-9 col-xl-9">
                                                                    <p class="col-form-label">
                                                                        {{ data.finishes.name }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row mb-2">
                                                                <h5 class="col-lg-3 col-md-3 col-xl-3 col-form-label">
                                                                  Cost Per SQFT
                                                                </h5>
                                                                <div class="col-lg-9 col-md-9 col-xl-9">
                                                                    <p class="col-form-label">
                                                                        {{ data.costPerSQFT }}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </p-accordionTab>
                            </p-accordion>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        

        <div class="row mt-3" *ngIf="slabDetails?.length > 0">
            <div class="col-md-12 col-sm-12 col-12">
                <h3>More Details</h3>
            </div>
            <div class="mt-3 row">
                <div class="col-12 col-md-6 col-xl-6">
                    <div class="form-group local-forms">
                        <label for="taxableAmount">Taxable Amount</label>
                        <p-inputGroup>
                            <input type="number" formControlName="taxableAmount" class="form-control" style="width: 50%"
                                placeholder="Enter Taxable Amount" (change)="calculateTotalAmount('tax')" />
                            <p-multiSelect [style]="{ width: '100%' }" placeholder="Select Tax" [options]="orderTaxList"
                                appendTo="body" formControlName="taxApplied" optionLabel="orderTaxName"
                                optionValue="orderNamevalue" display="chip"
                                (onChange)="calculateTotalAmount()"></p-multiSelect>
                        </p-inputGroup>
                        <div *ngIf="taxableAmount">
                            <span class="login-danger">Non-Taxable Amount and Taxable Amount should be equal to Total Amount (Paid to Supplier)</span>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-xl-6">
                    <div class="form-group local-forms">
                        <label for="finishes">Non-Taxable Amount</label>
                        <input class="form-control" type="number" placeholder="Non-Taxable Amount"
                            formControlName="nonTaxable" (onChange)="calculateTotalAmount('tax')" />
                    </div>
                </div>
                <div class="col-12 col-md-6 col-xl-6">
                    <div class="form-group local-forms">
                        <label for="paidToSupplierPurchaseCost">Purchase Cost ( Paid to Supplier )
                            <span class="login-danger">*</span></label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">₹</span>
                            </div>
                            <span class="form-control">{{
                                slabAddForm.get("paidToSupplierSlabCost").value
                                }}</span>
                        </div>
                        <span *ngIf="
                   slabAddForm.get('taxable').value  > slabAddForm.get('taxableAmount').value &&
                   slabAddForm.get('taxable').value  != 0
                  " style="color: #97704f; font-size: 12px">
                            Tax Applied Amount:
                            {{ slabAddForm.get('taxable')?.value | number : "1.2-2" }}
                            + Non Taxable Amount :
                            {{
                            slabAddForm.get("nonTaxableAmount")?.value | number : "1.2-2"
                            }}
                            <span *ngIf="slabAddForm.get('slabDiscount')?.value > 0">
                                - Discount :
                                {{
                                slabAddForm.get("slabDiscount")?.value | number : "1.2-2"
                                }}
                            </span>
                        </span>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-xl-6">
                    <div class="form-group local-forms">
                        <label for="slabDiscount">Discount </label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">₹</span>
                            </div>
                            <input class="form-control" type="number" placeholder="Enter Discount"
                                (change)="calculateTotalAmount('slabDiscount')" formControlName="slabDiscount" />
                        </div>
                        <div *ngIf="setValidations('slabDiscount')">
                            <span class="login-danger">Input Must be between 1 to {{maxPurchaseAmount}}.
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-xl-6">
                    <div class="form-group local-forms">
                        <label for="transportationCharge">Transportation Charges</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">₹</span>
                            </div>
                            <input class="form-control" type="number" placeholder="Enter Transportation Charge / Ton"
                                (change)="calculateTotalAmount()" formControlName="transportationCharge" />
                        </div>
                        <div *ngIf="setValidations('transportationCharge')">
                            <span class="login-danger">Field is required.</span>
                        </div>
                        <div *ngIf="setValidations('transportationCharge')">
                            <span class="login-danger">Input Must be between 1 to 100000.
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-xl-6">
                    <div class="form-group local-forms">
                        <label for="royaltyCharge">Other Charges</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">₹</span>
                            </div>
                            <input class="form-control" type="number" placeholder="Enter Other Charges"
                                formControlName="royaltyCharge" (change)="calculateTotalAmount()" />
                        </div>
                        <div *ngIf="setValidations('royaltyCharge')">
                            <span class="login-danger">Field is required.</span>
                        </div>
                        <div *ngIf="setValidations('royaltyCharge')">
                            <span class="login-danger">Input Must be between 1 to 100000.
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <div class="row" style="display: flex; justify-content: end;">
        <div class="col-md-4">
            <div class="invoice-total-card">
                <h4 class="invoice-total-title">Summary</h4>
                <div class="invoice-total-box">
                    <div class="invoice-total-inner">
                        <p *ngIf="slabAddForm.get('transportationCharge')?.value" class="mt-2">
                            Transportation Charges
                            <span>
                                ₹
                                {{
                                slabAddForm.get('transportationCharge')?.value
                                | number : "1.2-2"
                                }}
                            </span>
                        </p>
                        <p *ngIf="slabAddForm.get('royaltyCharge')?.value" class="mt-2">
                            Other Charges
                            <span>
                                ₹
                                {{
                                slabAddForm.get('royaltyCharge')?.value
                                | number : "1.2-2"
                                }}
                            </span>
                        </p>
                        <p *ngIf="slabAddForm.get('slabDiscount')?.value" class="mt-2">
                            Discount
                            <span>
                                ₹
                                {{
                                slabAddForm.get('slabDiscount')?.value
                                | number : "1.2-2"
                                }}
                            </span>
                        </p>
                        <!-- <p class="mt-2">
                            Cost / Square Feet
                            <span *ngIf="slabAddForm.get('costPerSQFT')?.value">
                                ₹
                                {{
                                slabAddForm.get('costPerSQFT')?.value
                                | number : "1.2-2"
                                }}
                            </span>
                        </p> -->
                        <h3>
                            <p *ngIf="slabAddForm.get('totalCost')?.value" class="mt-2">
                                Total Purchase Cost
                                <span>
                                    ₹
                                    {{
                                    slabAddForm.get('totalCost')?.value
                                    | number : "1.2-2"
                                    }}
                                </span>
                            </p>
                        </h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>